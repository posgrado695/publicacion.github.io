<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurador de Estrategias de Marketing Digital</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Vanilla CSS -->
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .tree {
            list-style: none;
            padding-left: 20px;
        }
        .tree li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <!-- Main Container -->
    <div class="container mt-5">
        <!-- Header Section -->
        <header class="mb-4">
            <h1 class="text-center text-3xl font-bold">Configurador de Estrategias de Marketing Digital</h1>
        </header>

        <!-- Carousel Section -->
        <div id="mainCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="https://via.placeholder.com/800x400" class="d-block w-100" alt="Promoción 1">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Promoción 1</h5>
                        <p>Descuento especial en estrategias digitales.</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="https://via.placeholder.com/800x400" class="d-block w-100" alt="Promoción 2">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Promoción 2</h5>
                        <p>Planifica tus campañas de manera fácil.</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="https://via.placeholder.com/800x400" class="d-block w-100" alt="Promoción 3">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Promoción 3</h5>
                        <p>Optimiza tus estrategias de redes sociales.</p>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

        <!-- Dynamic Menu Section -->
        <nav id="dynamicMenu" class="mb-5">
            <!-- Menu items will be loaded dynamically here -->
        </nav>

        <!-- Content Tree Section -->
        <section class="mb-5">
            <h2 class="text-2xl font-bold">Estructura del Sitio</h2>
            <ul id="contentTree" class="tree">
                <!-- Content tree will be loaded dynamically here -->
            </ul>
        </section>

        <!-- Form Section -->
        <section>
            <h2 class="text-2xl font-bold">Gestionar Registros</h2>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="dataTable">
                    <!-- Data rows will be populated dynamically -->
                </tbody>
            </table>
            <button class="btn btn-primary" onclick="addRecord()">Agregar Registro</button>
        </section>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom Script -->
    <script>
        // Load Menu from XML
        async function loadMenu() {
            const response = await fetch('menu.xml');
            const text = await response.text();
            const parser = new DOMParser();
            const xml = parser.parseFromString(text, 'application/xml');
            const menuContainer = document.getElementById('dynamicMenu');

            const menuItems = xml.getElementsByTagName('item');
            let menuHTML = '<ul class="list-inline">';

            for (let item of menuItems) {
                const name = item.getAttribute('name');
                const link = item.getAttribute('link');
                menuHTML += `<li class="list-inline-item"><a href="${link}" class="text-primary">${name}</a>`;
                const subMenu = item.getElementsByTagName('submenu')[0];
                if (subMenu) {
                    menuHTML += '<ul>';
                    const subItems = subMenu.getElementsByTagName('item');
                    for (let subItem of subItems) {
                        const subName = subItem.getAttribute('name');
                        const subLink = subItem.getAttribute('link');
                        menuHTML += `<li><a href="${subLink}">${subName}</a></li>`;
                    }
                    menuHTML += '</ul>';
                }
                menuHTML += '</li>';
            }
            menuHTML += '</ul>';

            menuContainer.innerHTML = menuHTML;
        }

        // Load Content Tree from JSON
        async function loadContentTree() {
            const response = await fetch('content-tree.json');
            const treeData = await response.json();

            const treeContainer = document.getElementById('contentTree');
            function generateTree(data) {
                let treeHTML = '<ul>';
                data.forEach(node => {
                    treeHTML += `<li>${node.name}`;
                    if (node.children) {
                        treeHTML += generateTree(node.children);
                    }
                    treeHTML += '</li>';
                });
                treeHTML += '</ul>';
                return treeHTML;
            }

            treeContainer.innerHTML = generateTree(treeData);
        }

        // Manage Table Data
        let tableData = [
            { id: 1, name: 'Campaña SEO' },
            { id: 2, name: 'Promoción Redes Sociales' }
        ];

        function populateTable() {
            const tableBody = document.getElementById('dataTable');
            tableBody.innerHTML = '';
            tableData.forEach((record, index) => {
                tableBody.innerHTML += `
                    <tr>
                        <td>${record.id}</td>
                        <td>${record.name}</td>
                        <td>
                            <button class="btn btn-warning" onclick="editRecord(${index})">Editar</button>
                            <button class="btn btn-danger" onclick="deleteRecord(${index})">Eliminar</button>
                        </td>
                    </tr>`;
            });
        }

        function addRecord() {
            const newName = prompt('Ingrese el nombre del registro:');
            if (newName) {
                tableData.push({ id: tableData.length + 1, name: newName });
                populateTable();
            }
        }

        function editRecord(index) {
            const newName = prompt('Editar nombre del registro:', tableData[index].name);
            if (newName) {
                tableData[index].name = newName;
                populateTable();
            }
        }

        function deleteRecord(index) {
            tableData.splice(index, 1);
            populateTable();
        }

        // Load Data
        loadMenu();
        loadContentTree();
        populateTable();
    </script>
</body>
</html>
