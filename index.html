<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú Dinámico</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Mi Sitio</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menuNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="menuNav">
                <ul class="navbar-nav" id="menu"></ul>
            </div>
        </div>
    </nav>

    <script>
        $(document).ready(function () {
            function loadMenuFromJson() {
                $.getJSON("menu.json", function (data) {
                    generateMenu(data.menu);
                });
            }

            function loadMenuFromXml() {
                $.ajax({
                    type: "GET",
                    url: "menu.xml",
                    dataType: "xml",
                    success: function (xml) {
                        let menuData = [];
                        $(xml).find("item").each(function () {
                            let subMenu = [];
                            $(this).find("submenu item").each(function () {
                                subMenu.push({
                                    name: $(this).attr("name"),
                                    link: $(this).attr("link")
                                });
                            });
                            menuData.push({
                                name: $(this).attr("name"),
                                link: $(this).attr("link"),
                                submenu: subMenu
                            });
                        });
                        generateMenu(menuData);
                    }
                });
            }

            function generateMenu(menuItems) {
                let menuHtml = "";
                menuItems.forEach(item => {
                    if (item.submenu && item.submenu.length > 0) {
                        menuHtml += `<li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="${item.name}" role="button" data-bs-toggle="dropdown">${item.name}</a>
                            <ul class="dropdown-menu">`;
                        item.submenu.forEach(sub => {
                            menuHtml += `<li><a class="dropdown-item" href="${sub.link}">${sub.name}</a></li>`;
                        });
                        menuHtml += `</ul></li>`;
                    } else {
                        menuHtml += `<li class="nav-item"><a class="nav-link" href="${item.link}">${item.name}</a></li>`;
                    }
                });
                $("#menu").html(menuHtml);
            }

            loadMenuFromJson(); // O cambiar a loadMenuFromXml(); según la fuente deseada
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
